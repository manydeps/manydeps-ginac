#build --cxxopt='-std=c++17'
#build --cxxopt='-Wno-macro-redefined'
#build --cxxopt='-Wno-builtin-macro-redefined'
#
#build --cxxopt='-Wno-unused-private-field'
#build --cxxopt='-g'

#build --client_env=CC=clang


# FOR WINDOWS, ENFORCING /MT MODE! GMP IS BUILT WITH /MT (LIBCMT), NOT /MD (lib msvcrt)
# WILL TRIGGER WARNING!
# cl : Command line warning D9025 : overriding '/MD' with '/MT'
#
# Beware that some other error seem to be inacceptable:
#    "mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' ..."
# If this happens, this is BAD!
#
# See: https://stackoverflow.com/questions/3007312/resolving-lnk4098-defaultlib-msvcrt-conflicts-with#3007915
#
# -------------------------------------

# Platform-specific settings
# --features=fully_static_link
# --features=static_link_msvcrt

# --linkopt=/NODEFAULTLIB # CAUSES SEVERAL LINK ERRORS! NO LIB IS FOUND...
# need to try later "defaultlib:libcmt"
build:windows     --cxxopt=-std:c++17                       --define=MY_LONG_SIZE=32 --define=GMP_TYPE_L="/* #undef GMP_DEMANDS_UINTD_LONG */" --define=GMP_TYPE_LL="#define GMP_DEMANDS_UINTD_LONG_LONG" --define=TIME_UNIX_WIN="/* #undef HAVE_GETTIMEOFDAY */" --cxxopt=-DNO_ASM --cxxopt=-DNO_ASM_LOOPS --cxxopt=/MT --features=fully_static_link  --linkopt=/NODEFAULTLIB:MSVCRT
build:linux       --cxxopt=-std=c++17                       --define=MY_LONG_SIZE=64 --define=GMP_TYPE_L="#define GMP_DEMANDS_UINTD_LONG" --define=GMP_TYPE_LL="/* #undef GMP_DEMANDS_UINTD_LONG_LONG */" --define=TIME_UNIX_WIN="#define HAVE_GETTIMEOFDAY" --features=fully_static_link
build:linux_clang --cxxopt=-std=c++17 --client_env=CC=clang --define=MY_LONG_SIZE=64 --define=GMP_TYPE_L="#define GMP_DEMANDS_UINTD_LONG" --define=GMP_TYPE_LL="/* #undef GMP_DEMANDS_UINTD_LONG_LONG */" --define=TIME_UNIX_WIN="#define HAVE_GETTIMEOFDAY"
build:linux_gcc   --cxxopt=-std=c++17 --client_env=CC=gcc   --define=MY_LONG_SIZE=64 --define=GMP_TYPE_L="#define GMP_DEMANDS_UINTD_LONG" --define=GMP_TYPE_LL="/* #undef GMP_DEMANDS_UINTD_LONG_LONG */" --define=TIME_UNIX_WIN="#define HAVE_GETTIMEOFDAY"
